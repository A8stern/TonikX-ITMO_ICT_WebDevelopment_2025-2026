{% extends "base.html" %}

{% block title %}Guests — {{ hotel.name }}{% endblock %}

{% block content %}
  <div class="card">
    <p><a href="/hotels/{{ hotel.pk }}/">← Back to hotel</a></p>

    <h1>Guests (last 30 days)</h1>
    <p><b>Hotel:</b> {{ hotel.name }}</p>
    <p><b>Period:</b> {{ start }} — {{ end }}</p>

    {% if reservations %}
      <table class="table table-striped table-bordered">
        <thead>
          <tr>
            <th>Guest</th>
            <th>Room type</th>
            <th>Check-in</th>
            <th>Check-out</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          {% for r in reservations %}
            <tr>
              <td>{{ r.user.username }}</td>
              <td>{{ r.hotel_room_type.room_type.title }}</td>
              <td>{{ r.check_in }}</td>
              <td>{{ r.check_out }}</td>
              <td>{{ r.get_status_display }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p>No guests for the last 30 days.</p>
    {% endif %}
  </div>
{% endblock %}